{"ast":null,"code":"var _jsxFileName = \"/Users/davidnaranjo/eas/eas-frontend/hocs/withTracking.jsx\";\nvar __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport ReactGA from 'react-ga';\nimport withMixpanel from './withMixpanel.jsx';\nimport config from '../config/config';\nimport { getExperimentsAllocation } from '../services/abtest';\n\nconst withTracking = WrappedComponent => {\n  const WithTracking = props => {\n    const {\n      mixpanel\n    } = props;\n\n    const track = ({\n      mp,\n      ga\n    }) => {\n      if (config.googleAnalyticsEnabled && ga) {\n        const {\n          category,\n          action,\n          label\n        } = ga;\n        ReactGA.event({\n          category,\n          action,\n          label\n        });\n      }\n\n      if (config.mixpanelEnabled && mp) {\n        const {\n          name,\n          properties\n        } = mp;\n\n        const data = _objectSpread({}, getExperimentsAllocation(), {}, properties);\n\n        mixpanel.track(name, data);\n      }\n    };\n\n    return __jsx(WrappedComponent, _extends({\n      track: track\n    }, props, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 25\n      },\n      __self: this\n    }));\n  };\n\n  WithTracking.propTypes = {\n    mixpanel: PropTypes.shape()\n  };\n  WithTracking.defaultProps = {\n    mixpanel: null\n  };\n  return withMixpanel(WithTracking);\n};\n\nexport default withTracking;","map":{"version":3,"sources":["/Users/davidnaranjo/eas/eas-frontend/hocs/withTracking.jsx"],"names":["React","PropTypes","ReactGA","withMixpanel","config","getExperimentsAllocation","withTracking","WrappedComponent","WithTracking","props","mixpanel","track","mp","ga","googleAnalyticsEnabled","category","action","label","event","mixpanelEnabled","name","properties","data","propTypes","shape","defaultProps"],"mappings":";;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,OAAP,MAAoB,UAApB;AACA,OAAOC,YAAP,MAAyB,oBAAzB;AACA,OAAOC,MAAP,MAAmB,kBAAnB;AACA,SAASC,wBAAT,QAAyC,oBAAzC;;AAEA,MAAMC,YAAY,GAAGC,gBAAgB,IAAI;AACvC,QAAMC,YAAY,GAAGC,KAAK,IAAI;AAC5B,UAAM;AAAEC,MAAAA;AAAF,QAAeD,KAArB;;AACA,UAAME,KAAK,GAAG,CAAC;AAAEC,MAAAA,EAAF;AAAMC,MAAAA;AAAN,KAAD,KAAgB;AAC5B,UAAIT,MAAM,CAACU,sBAAP,IAAiCD,EAArC,EAAyC;AACvC,cAAM;AAAEE,UAAAA,QAAF;AAAYC,UAAAA,MAAZ;AAAoBC,UAAAA;AAApB,YAA8BJ,EAApC;AACAX,QAAAA,OAAO,CAACgB,KAAR,CAAc;AAAEH,UAAAA,QAAF;AAAYC,UAAAA,MAAZ;AAAoBC,UAAAA;AAApB,SAAd;AACD;;AACD,UAAIb,MAAM,CAACe,eAAP,IAA0BP,EAA9B,EAAkC;AAChC,cAAM;AAAEQ,UAAAA,IAAF;AAAQC,UAAAA;AAAR,YAAuBT,EAA7B;;AACA,cAAMU,IAAI,qBACLjB,wBAAwB,EADnB,MAELgB,UAFK,CAAV;;AAIAX,QAAAA,QAAQ,CAACC,KAAT,CAAeS,IAAf,EAAqBE,IAArB;AACD;AACF,KAbD;;AAcA,WAAO,MAAC,gBAAD;AAAkB,MAAA,KAAK,EAAEX;AAAzB,OAAoCF,KAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAP;AACD,GAjBD;;AAmBAD,EAAAA,YAAY,CAACe,SAAb,GAAyB;AACvBb,IAAAA,QAAQ,EAAET,SAAS,CAACuB,KAAV;AADa,GAAzB;AAGAhB,EAAAA,YAAY,CAACiB,YAAb,GAA4B;AAC1Bf,IAAAA,QAAQ,EAAE;AADgB,GAA5B;AAIA,SAAOP,YAAY,CAACK,YAAD,CAAnB;AACD,CA5BD;;AA8BA,eAAeF,YAAf","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport ReactGA from 'react-ga';\nimport withMixpanel from './withMixpanel.jsx';\nimport config from '../config/config';\nimport { getExperimentsAllocation } from '../services/abtest';\n\nconst withTracking = WrappedComponent => {\n  const WithTracking = props => {\n    const { mixpanel } = props;\n    const track = ({ mp, ga }) => {\n      if (config.googleAnalyticsEnabled && ga) {\n        const { category, action, label } = ga;\n        ReactGA.event({ category, action, label });\n      }\n      if (config.mixpanelEnabled && mp) {\n        const { name, properties } = mp;\n        const data = {\n          ...getExperimentsAllocation(),\n          ...properties,\n        };\n        mixpanel.track(name, data);\n      }\n    };\n    return <WrappedComponent track={track} {...props} />;\n  };\n\n  WithTracking.propTypes = {\n    mixpanel: PropTypes.shape(),\n  };\n  WithTracking.defaultProps = {\n    mixpanel: null,\n  };\n\n  return withMixpanel(WithTracking);\n};\n\nexport default withTracking;\n"]},"metadata":{},"sourceType":"module"}